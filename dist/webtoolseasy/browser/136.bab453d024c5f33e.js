"use strict";(self.webpackChunkwebtoolseasy=self.webpackChunkwebtoolseasy||[]).push([[136],{1136:(We,U,c)=>{c.r(U),c.d(U,{VideoConverterModule:()=>je});var y=c(6814),k=c(3403),d=c(5861),M=c(1088),H=c(8645),K=c(9773),X=c(7421),h=c(4930),w=c(553),ee=c(6636);const $="/tools/video-converter",S="Video to Audio Converter | Online Video Converter | MP4 to MP3",P="Video to Audio Converter tool lets you convert your videos to high-quality audio for free. Supports wide range of video formats i.e MP4, MKV, WEBM, AVI, OGM.",O=`${w.N.screenshotsBaseUrl}/video-converter.png`,te={mainHeading:"Online Video to Audio Converter",subHeading:"Convert Videos to Audio For Free",navigationUrl:$,pageTitle:S,metaTags:[{name:"description",content:P},{name:"author",content:"Gaurav Kumar Yadav"},{name:"robots",content:"index, follow"},{property:"og:title",content:S},{property:"og:type",content:"website"},{property:"og:url",content:`${w.N.hostname}${$}`},{property:"og:image",content:O},{property:"og:image:secure_url",content:O},{property:"og:description",content:P},{property:"og:site_name",content:"WebToolsEasy"},{property:"twitter:card",content:"summary_large_image"},{property:"twitter:site",content:"@webtoolseasy"},{property:"twitter:title",content:S},{property:"twitter:description",content:P},{property:"twitter:image",content:O}],tags:["video to audio converter","mp4 to mp3","webm to mp4","mp4 to webm","mkv to mp4","video to audio"],icons:[{iconName:"video-convert-icon",iconRelativeUrl:"video-convert.svg"},{iconName:"settings-icon",iconRelativeUrl:"settings.svg"},{iconName:"download-icon",iconRelativeUrl:"download.svg"},{iconName:"play-icon",iconRelativeUrl:"play-icon.svg"},{iconName:"screen-icon",iconRelativeUrl:"screen.svg"}],relatedTools:[{applicationId:"screen-recorder",displayText:ee.x.SCREEN_RECORDER,iconName:"screen-icon",navigateUrl:"/tools/screen-recorder"}]},oe=[{heading:"How to use Video to Audio Converter Tool?",listData:["Drag & drop or select video files to convert.","All video files will be listed. An error will be shown for invalid file types.","For converting videos either use convert button corresponding to the video file or use convert all button.","Default target format for all videos will be MP3 (Audio) and it can be changed via dropdown corresponding to each video file.","Use download button corresponding to a video file to download converted video.","Use download zip button to download all converted videos at once."]},{heading:"What is the need of a Video to Audio Converter Tool?",listData:["Compatibility: Different devices and applications often support different video formats. By using an online video conversion tool, you can convert your video file into a format that is compatible with the device or application you want to use it on.","File size: Large video files can take up a lot of storage space on your device or take a long time to upload or download. By using a video conversion tool, you can reduce the file size of your video without compromising on quality, making it easier to store and share.","Editing: If you need to edit a video, you may need to convert it into a different format to work with the editing software you're using. An online video conversion tool can help you convert your video file into a format that's compatible with your editing software.","Sharing: Different social media platforms and websites often have different requirements for video formats and file sizes. An online video conversion tool can help you convert your video into the appropriate format and size for sharing on different platforms."]},{heading:"Key features",listData:["Video to Audio conversion is 100% free. No registration required. No credit card requied.","Video to Audio conversion is 100% secure as whole processing is being done at client side only (in host browser)","Unlimited videos can be converted to Audio for free","Supports wide range of input video formats - MP4, WEBM, OGV, MKV, OGM","Supports wide range of output media formats - MP3, OGG, OPUS, AAC, MP4 x264, MP4 x265, WEBM, OGV"]}],J={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var ie=c(3573),ne=c(1389);var I=function(i){return i[i.START=1]="START",i[i.END=2]="END",i[i.FAILED=3]="FAILED",i}(I||{}),G=function(i){return i.VIDEO_CONVERT_SETTINGS="video-convert-sttings",i}(G||{}),B=function(i){return i.DROPDOWN="dropdown",i.BUTTON="button",i}(B||{}),b=c(7700),e=c(5879),R=c(9157),A=c(8525),Q=c(3680),N=c(2296);function se(i,r){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&i){const n=r.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.displayName)}}function le(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"mat-form-field",9)(1,"mat-label"),e._uU(2,"Select format"),e.qZA(),e.TgZ(3,"mat-select",10),e.NdJ("valueChange",function(o){e.CHM(n);const a=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.changeDropdownValue(a.propertyName,o))}),e.YNc(4,se,2,2,"mat-option",11),e.qZA()()}if(2&i){const n=e.oxw().$implicit;e.xp6(3),e.Q6J("value",n.data.targetFormat),e.xp6(1),e.Q6J("ngForOf",n.data.options)}}function ce(i,r){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,le,5,2,"mat-form-field",8),e.qZA()),2&i){const n=r.$implicit;e.xp6(1),e.Q6J("ngIf","dropdown"===n.type)}}function de(i,r){if(1&i&&(e.TgZ(0,"div",5),e.YNc(1,ce,2,1,"div",6),e.qZA()),2&i){const n=r.$implicit;e.xp6(1),e.Q6J("ngForOf",n.elements)}}let fe=(()=>{var i;class r{constructor(t,o){this.dialogRef=t,this.formContext=o,this.result={data:{},type:this.formContext.type,referenceId:this.formContext.referenceId}}applySettings(){this.dialogRef.close(this.result)}cancelDialog(){this.dialogRef.close()}changeDropdownValue(t,o){this.result.data[t]=o}}return(i=r).\u0275fac=function(t){return new(t||i)(e.Y36(b.so),e.Y36(b.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-popup-form"]],decls:7,vars:1,consts:[[1,"flex-display","flex-column-flow",2,"margin","15px"],["class","popup-row flex-display flex-row-flow full-width flex-center flex-align-center",4,"ngFor","ngForOf"],[1,"flex-display","flex-row-flow","full-width","flex-center",2,"margin-top","15px"],["mat-raised-button","","color","primary",2,"margin-right","10px",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"popup-row","flex-display","flex-row-flow","full-width","flex-center","flex-align-center"],["class","popup-element",4,"ngFor","ngForOf"],[1,"popup-element"],["appearance","outline","color","primary","style","margin-right: 10px; margin-bottom: -1.25em",4,"ngIf"],["appearance","outline","color","primary",2,"margin-right","10px","margin-bottom","-1.25em"],["disableRipple","",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,de,2,1,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return o.applySettings()}),e._uU(4," Apply Settings "),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return o.cancelDialog()}),e._uU(6," Cancel "),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.formContext.rows))},dependencies:[y.sg,y.O5,R.KE,R.hX,A.gD,Q.ey,N.lW],styles:[".popup-row[_ngcontent-%COMP%]{margin:5px 10px}.popup-element[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}"]}),r})();const x=new Map([[1,{targetFormat:"mp3",displayName:"MP3 (Audio)"}],[2,{targetFormat:"ogg",displayName:"OGG (Audio)"}],[3,{targetFormat:"opus",displayName:"OPUS (Audio)"}],[4,{targetFormat:"aac",displayName:"AAC (Audio)"}],[5,{targetFormat:"mp4",displayName:"MP4 x264(Video)"}],[6,{targetFormat:"mp4",displayName:"MP4 x265(Video)"}],[7,{targetFormat:"webm",displayName:"WEBM (Video)"}],[8,{targetFormat:"ogv",displayName:"OGV (Video)"}],[9,{targetFormat:"mkv",displayName:"MKV (Video)"}],[10,{targetFormat:"avi",displayName:"AVI (Video)"}],[11,{targetFormat:"ogm",displayName:"OGM (Video)"}]]),pe=new Map(Object.entries({mp4:[1,4],webm:[1,3,4],ogm:[1,4],mkv:[1,4,5,6],avi:[1,3,4],ogv:[1,2,3,4,5,6,7]})),V=new Map([[1,new Map([[0,"-i {0} {1}"]])],[2,new Map([[0,"-i {0} {1}"]])],[3,new Map([[0,"-i {0} {1}"]])],[4,new Map([[0,"-i {0} {1}"]])],[5,new Map([[0,"-i {0} -c:v libx264 {1}"],[9,"-i {0} -codec copy {1}"]])],[6,new Map([[0,"-i {0} -c:v libx265 {1}"],[9,"-i {0} -codec copy {1}"]])],[7,new Map([[0,"-i {0} {1}"]])],[8,new Map([[0,"-i {0} {1}"]])],[9,new Map([[0,"-i {0} {1}"],[5,"-i {0} -codec copy {1}"],[6,"-i {0} -codec copy {1}"]])],[10,new Map([[0,"-i {0} {1}"]])],[11,new Map([[0,"-i {0} {1}"]])]]);var me=c(6179);class ue{constructor(){this.items=[]}enqueue(r){this.items.push(r)}dequeue(){if(this.isEmpty())throw Error("no elements in queue");return this.items.shift()}front(){if(this.isEmpty())throw Error("no elements in queue");return this.items[0]}isEmpty(){return 0===this.items.length}}function F(i,r,n){(function ge(i,r){if(r.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")})(i,r),r.set(i,n)}function Y(i,r,n){if(!r.has(i))throw new TypeError("attempted to "+n+" private field on non-instance");return r.get(i)}function l(i,r){return function ve(i,r){return r.get?r.get.call(i):r.value}(i,Y(i,r,"get"))}function u(i,r,n){return function he(i,r,n){if(r.set)r.set.call(i,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(i,Y(i,r,"set"),n),n}var f=function(i){return i.LOAD="LOAD",i.EXEC="EXEC",i.WRITE_FILE="WRITE_FILE",i.READ_FILE="READ_FILE",i.DELETE_FILE="DELETE_FILE",i.RENAME="RENAME",i.CREATE_DIR="CREATE_DIR",i.LIST_DIR="LIST_DIR",i.DELETE_DIR="DELETE_DIR",i.ERROR="ERROR",i.DOWNLOAD="DOWNLOAD",i.PROGRESS="PROGRESS",i.LOG="LOG",i}(f||{});const _e=(()=>{let i=0;return()=>i++})(),ye=(new Error("unknown message type"),new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first")),we=new Error("called FFmpeg.terminate()");new Error("failed to import ffmpeg-core.js");var m=new WeakMap,E=new WeakMap,_=new WeakMap,C=new WeakMap,T=new WeakMap,D=new WeakMap,g=new WeakMap;class xe{constructor(){F(this,m,{writable:!0,value:void 0}),F(this,E,{writable:!0,value:void 0}),F(this,_,{writable:!0,value:void 0}),F(this,C,{writable:!0,value:void 0}),F(this,T,{writable:!0,value:void 0}),F(this,D,{writable:!0,value:void 0}),F(this,g,{writable:!0,value:void 0}),u(this,m,null),u(this,E,{}),u(this,_,{}),u(this,C,[]),u(this,T,[]),this.loaded=!1,u(this,D,()=>{l(this,m)&&(l(this,m).onmessage=({data:{id:r,type:n,data:t}})=>{switch(n){case f.LOAD:this.loaded=!0,l(this,E)[r](t);break;case f.EXEC:case f.WRITE_FILE:case f.READ_FILE:case f.DELETE_FILE:case f.RENAME:case f.CREATE_DIR:case f.LIST_DIR:case f.DELETE_DIR:l(this,E)[r](t);break;case f.LOG:l(this,C).forEach(o=>o(t));break;case f.PROGRESS:l(this,T).forEach(o=>o(t));break;case f.ERROR:l(this,_)[r](t)}delete l(this,E)[r],delete l(this,_)[r]})}),u(this,g,({type:r,data:n},t=[])=>l(this,m)?new Promise((o,a)=>{const s=_e();l(this,m)&&l(this,m).postMessage({id:s,type:r,data:n},t),l(this,E)[s]=o,l(this,_)[s]=a}):Promise.reject(ye)),this.load=(r={})=>(l(this,m)||(u(this,m,new Worker(`${w.N.hostname}/assets/@ffmpeg/worker.js`,{type:"module"})),l(this,D).call(this)),l(this,g).call(this,{type:f.LOAD,data:r})),this.exec=(r,n=-1)=>l(this,g).call(this,{type:f.EXEC,data:{args:r,timeout:n}}),this.terminate=()=>{const r=Object.keys(l(this,_));for(const n of r)l(this,_)[n](we),delete l(this,_)[n],delete l(this,E)[n];l(this,m)&&(l(this,m).terminate(),u(this,m,null),this.loaded=!1)},this.writeFile=(r,n)=>{const t=[];return n instanceof Uint8Array&&t.push(n.buffer),l(this,g).call(this,{type:f.WRITE_FILE,data:{path:r,data:n}},t)},this.readFile=(r,n="binary")=>l(this,g).call(this,{type:f.READ_FILE,data:{path:r,encoding:n}}),this.deleteFile=r=>l(this,g).call(this,{type:f.DELETE_FILE,data:{path:r}}),this.rename=(r,n)=>l(this,g).call(this,{type:f.RENAME,data:{oldPath:r,newPath:n}}),this.createDir=r=>l(this,g).call(this,{type:f.CREATE_DIR,data:{path:r}}),this.listDir=r=>l(this,g).call(this,{type:f.LIST_DIR,data:{path:r}}),this.deleteDir=r=>l(this,g).call(this,{type:f.DELETE_DIR,data:{path:r}})}on(r,n){"log"===r?l(this,C).push(n):"progress"===r&&l(this,T).push(n)}off(r,n){"log"===r?u(this,C,l(this,C).filter(t=>t!==n)):"progress"===r&&u(this,T,l(this,T).filter(t=>t!==n))}}var Z=c(6785);let Fe=(()=>{var i;class r{constructor(){this.isConverting=!1,this.currentFile=void 0,this.init()}init(){this.fileQueue=new ue,this.fileMap=new Map,this.progressEvent=new e.vpe,this.convertEvent=new e.vpe,this.fileLoadedEvent=new e.vpe,this.convertLogEvent=new e.vpe,this.ffmpegStateEvent=new e.vpe}initializeFFMpeg(){var t=this;return(0,d.Z)(function*(){t.ffmpeg=new xe,t.ffmpeg.on("log",t.handleLogs.bind(t)),t.ffmpeg.on("progress",t.handleFFMpegProgress.bind(t)),yield t.ffmpeg.load({coreURL:yield(0,Z.Wn)(`${w.N.ffmpegBaseUrl}/ffmpeg-core.js`,"text/javascript"),wasmURL:yield(0,Z.Wn)(`${w.N.ffmpegBaseUrl}/ffmpeg-core.wasm`,"application/wasm"),workerURL:yield(0,Z.Wn)(`${w.N.ffmpegBaseUrl}/ffmpeg-core.worker.js`,"text/javascript")})})()}flushBuffer(){var t=this;return(0,d.Z)(function*(){t.ffmpeg&&t.ffmpeg.loaded&&t.ffmpeg.terminate()})()}handleLogs(t){var o=this;return(0,d.Z)(function*(){o.convertLogEvent.emit({...t})})()}handleConversionFailure(){var t=this;return(0,d.Z)(function*(){if(t.convertEvent.emit({fileId:t.currentFile.id,type:I.FAILED,targetFormat:t.currentFile.targetFormat}),yield t.ffmpeg.deleteFile(t.currentFile.name),t.currentFile=void 0,t.isConverting=!1,!t.fileQueue.isEmpty()&&!t.isConverting){t.isConverting=!0;const o=t.fileQueue.dequeue();t.currentFile=o,t.convertVideoFile(o)}})()}handleFFMpegProgress(t){var o=this;return(0,d.Z)(function*(){const a=Number((100*t.progress).toFixed(2));if(o.progressEvent.emit({fileId:o.currentFile.id,progress:a}),100===a&&(o.convertEvent.emit({fileId:o.currentFile.id,type:I.END,fileData:yield o.ffmpeg.readFile(o.currentFile.targetFileName),targetFormat:o.currentFile.targetFormat}),yield o.ffmpeg.deleteFile(o.currentFile.targetFileName),yield o.ffmpeg.deleteFile(o.currentFile.name),o.ffmpeg.terminate(),o.currentFile=void 0,o.isConverting=!1,!o.fileQueue.isEmpty()&&!o.isConverting)){o.isConverting=!0;const s=o.fileQueue.dequeue();o.currentFile=s,o.convertVideoFile(s)}})()}getPlainFileName(t){return t.substring(0,t.lastIndexOf("."))||t}buildFFMpegCommand(t,o,a){let s;s=V.get(o).has(t)?V.get(o).get(t):V.get(o).get(0);for(let p=0;p<a.length;p++)s=s.split(`{${p}}`).join(a[p]);return s.split(" ")}submitFileToConvert(t,o=!1){var a=this;return(0,d.Z)(function*(){if(o||!a.fileMap.has(t.id)||a.fileMap.get(t.id)!==t.targetFormat){if(a.fileQueue.enqueue(t),a.fileMap.set(t.id,t.targetFormat),!a.isConverting){a.isConverting=!0;const s=a.fileQueue.dequeue();a.currentFile=s,a.convertVideoFile(s)}}else h.j.info("file has already been submitted")})()}convertVideoFile(t){var o=this;return(0,d.Z)(function*(){o.ffmpegStateEvent.emit({fileId:t.id,status:"initializing"}),yield o.initializeFFMpeg(),o.ffmpegStateEvent.emit({fileId:t.id,status:"ready"}),yield o.writeFileInFFMpegBuffer(t),t.targetFileName=`${o.getPlainFileName(t.name)}_converted.${x.get(t.targetFormat).targetFormat}`;const a=o.buildFFMpegCommand(t.fileFormat,t.targetFormat,[t.name,t.targetFileName]);h.j.info(`[FFMPEG Command]: ${a.join(" ")}`),0!==(yield o.ffmpeg.exec(a))&&o.handleConversionFailure()})()}writeFileInFFMpegBuffer(t){var o=this;return(0,d.Z)(function*(){yield o.ffmpeg.writeFile(t.name,yield(0,Z.dc)(t.file)),o.fileLoadedEvent.emit({fileId:t.id,loaded:!0})})()}readFileInFFMpegBuffer(t){var o=this;return(0,d.Z)(function*(){return yield o.ffmpeg.readFile(t)})()}}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),r})();var Ee=c(3242),L=c(617),j=c(5195),W=c(2596),q=c(5940);const Ce=["inputFiles"];function Te(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"div",7),e.NdJ("drop",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.dropHandler(o))})("dragover",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.dragOverHandler(o))}),e.TgZ(1,"mat-icon",8),e._uU(2,"collections"),e.qZA(),e.TgZ(3,"span",9),e._uU(4,"Drag & drop files here"),e.qZA(),e.TgZ(5,"span",9),e._uU(6,"or"),e.qZA(),e.TgZ(7,"button",10),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.openFileDialog())}),e.TgZ(8,"mat-icon"),e._uU(9,"file_upload"),e.qZA(),e._uU(10," Browse for files "),e.qZA()()}}function Ie(i,r){1&i&&(e.TgZ(0,"div")(1,"span",11),e._uU(2,"Video converter currently is not supported on host platfrom. We're working on it, thank you for showing interest."),e.qZA()())}const be=function(i){return{padding:"10px","justify-content":i}};function Me(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"div",12)(1,"button",13),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.openFileDialog())}),e.TgZ(2,"mat-icon"),e._uU(3,"file_upload"),e.qZA(),e._uU(4," Select Files "),e.qZA(),e.TgZ(5,"button",14),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.convertAllVideos())}),e.TgZ(6,"mat-icon"),e._uU(7,"play_arrow"),e.qZA(),e._uU(8," Convert All "),e.qZA()()}if(2&i){const n=e.oxw();e.Q6J("ngStyle",e.VKq(1,be,n.fileDisplayList.length>0?"end":"center"))}}function Re(i,r){1&i&&e._UZ(0,"mat-icon",34)}function Ae(i,r){if(1&i&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&i){const n=e.oxw().$implicit;e.xp6(1),e.Oqu(n.error)}}function Ne(i,r){if(1&i&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&i){const n=e.oxw().$implicit;e.xp6(1),e.Oqu(n.conversionErrors.get(n.targetFormat))}}function Ze(i,r){if(1&i&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&i){const n=e.oxw().$implicit;e.xp6(1),e.hij("Progress: ",n.convertProgress,"%")}}function Se(i,r){1&i&&e._UZ(0,"mat-spinner",36)}function Pe(i,r){if(1&i&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&i){const n=e.oxw().$implicit;e.xp6(1),e.hij("Progress: ",n.convertProgress,"%")}}function Oe(i,r){if(1&i&&e._UZ(0,"mat-spinner",37),2&i){const n=e.oxw().$implicit;e.s9C("value",n.convertProgress)}}function Ve(i,r){if(1&i&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&i){const n=r.$implicit;e.Q6J("value",n.formatId),e.xp6(1),e.Oqu(n.displayName)}}function De(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"mat-form-field",38)(1,"mat-label"),e._uU(2,"Select format"),e.qZA(),e.TgZ(3,"mat-select",39),e.NdJ("valueChange",function(o){e.CHM(n);const a=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.changeTargetFormat(a.id,o))}),e.YNc(4,Ve,2,2,"mat-option",40),e.qZA()()}if(2&i){const n=e.oxw().$implicit;e.xp6(3),e.Q6J("value",n.targetFormat),e.xp6(1),e.Q6J("ngForOf",n.supportedFormats)}}function Le(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"mat-icon",42),e.NdJ("click",function(){e.CHM(n);const o=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.openSettings(o))}),e.qZA()}}function Ue(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"mat-icon",43),e.NdJ("click",function(){e.CHM(n);const o=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.convertVideoFile(o))}),e.qZA()}}function ke(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"mat-icon",44),e.NdJ("click",function(){e.CHM(n);const o=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.downloadVideo(o))}),e.qZA()}}function $e(i,r){1&i&&(e.TgZ(0,"mat-icon",45),e._uU(1,"error"),e.qZA())}function Je(i,r){if(1&i&&(e.TgZ(0,"mat-card",17)(1,"div",18),e.YNc(2,Re,1,0,"mat-icon",19),e.TgZ(3,"div",20)(4,"span",21),e._uU(5),e.qZA(),e.TgZ(6,"span",22),e._uU(7),e.qZA(),e.YNc(8,Ae,2,1,"span",23),e.YNc(9,Ne,2,1,"span",23),e.YNc(10,Ze,2,1,"span",24),e.qZA(),e._UZ(11,"span",25),e.TgZ(12,"div",26),e.YNc(13,Se,1,0,"mat-spinner",27),e.YNc(14,Pe,2,1,"span",24),e.YNc(15,Oe,1,1,"mat-spinner",28),e.YNc(16,De,5,2,"mat-form-field",29),e.YNc(17,Le,1,0,"mat-icon",30),e.YNc(18,Ue,1,0,"mat-icon",31),e.YNc(19,ke,1,0,"mat-icon",32),e.YNc(20,$e,2,0,"mat-icon",33),e.qZA()()()),2&i){const n=r.$implicit,t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.platformMetaDataService.isPlatformBrowser),e.xp6(3),e.Oqu(n.file.name),e.xp6(2),e.Oqu(t.formatBytes(n.file.size)),e.xp6(1),e.Q6J("ngIf",void 0!==n.error),e.xp6(1),e.Q6J("ngIf",n.conversionErrors.get(n.targetFormat)),e.xp6(1),e.Q6J("ngIf",t.isMobile&&n.inProgress&&n.convertProgress>0),e.xp6(3),e.Q6J("ngIf",n.inProgress&&0===n.convertProgress),e.xp6(1),e.Q6J("ngIf",!t.isMobile&&n.inProgress&&n.convertProgress>0),e.xp6(1),e.Q6J("ngIf",n.inProgress&&n.convertProgress>0),e.xp6(1),e.Q6J("ngIf",!n.inProgress&&!t.isMobile),e.xp6(1),e.Q6J("ngIf",t.platformMetaDataService.isPlatformBrowser&&t.isMobile&&!n.inProgress),e.xp6(1),e.Q6J("ngIf",t.platformMetaDataService.isPlatformBrowser&&!n.inProgress&&!n.convertedFileData.has(n.targetFormat)),e.xp6(1),e.Q6J("ngIf",t.platformMetaDataService.isPlatformBrowser&&n.convertedFileData.has(n.targetFormat)),e.xp6(1),e.Q6J("ngIf",n.error)}}function Ge(i,r){if(1&i&&(e.TgZ(0,"div",15),e.YNc(1,Je,21,14,"mat-card",16),e.qZA()),2&i){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.fileDisplayList)}}const Be=[{path:"",component:(()=>{var i;class r{constructor(t,o,a,s,p,v){this.dialog=t,this.renderer=o,this.zoneRef=a,this.breakpointObserver=s,this.ffmpegService=p,this.platformMetaDataService=v,this.ERROR_MESSAGE="* error: invalid file type",this.destroyed=new H.x,this.isDownloadAllActive=!1,this.isSupported=!0,this.validVideoFormats=".mp4,.webm,.ogv,.mkv,.ogm,.avi",this.applicationConfig=te,this.descriptionData=oe,this.breakpointObserver.observe([M.u3.Handset,M.u3.Web]).pipe((0,K.R)(this.destroyed)).subscribe(it=>{this.isMobile=s.isMatched(`(max-width: ${me.U})`),this.checkCompatibility()}),this.fileStore=new Map,this.fileDisplayList=[],this.subscriptions=[],this.subscriptions.push(this.ffmpegService.fileLoadedEvent.subscribe(this.handleBufferFileLoad.bind(this))),this.subscriptions.push(this.ffmpegService.progressEvent.subscribe(this.handleConverionProgress.bind(this))),this.subscriptions.push(this.ffmpegService.convertLogEvent.subscribe(this.handleFFMpegLog.bind(this))),this.subscriptions.push(this.ffmpegService.convertEvent.subscribe(this.handleConvertEvent.bind(this))),this.subscriptions.push(this.ffmpegService.ffmpegStateEvent.subscribe(this.handleFFMpegStatus.bind(this))),this.conversionLogs=[],this.checkCompatibility()}ngOnDestroy(){var t=this;return(0,d.Z)(function*(){t.destroyed.next(),t.destroyed.complete(),t.subscriptions.forEach(o=>o.unsubscribe()),t.subscriptions=[],yield t.ffmpegService.flushBuffer()})()}checkCompatibility(){w.N.production&&(this.isSupported=!0)}handleFFMpegStatus(t){var o=this;return(0,d.Z)(function*(){o.zoneRef.run(()=>{o.fileStore.get(t.fileId).converterStatus=t.status})})()}handleBufferFileLoad(t){var o=this;return(0,d.Z)(function*(){o.zoneRef.run(()=>{h.j.info(t.loaded?`file with id: ${t.fileId} loaded in ffmpeg buffer`:`fail to load file with id: ${t.fileId} in buffer`)})})()}handleConverionProgress(t){var o=this;return(0,d.Z)(function*(){o.zoneRef.run(()=>{h.j.info(`[conversion progress] ( progress: ${t.progress}, file id: ${t.fileId})`);const a=o.fileStore.get(t.fileId);a.convertProgress=t.progress,a.inProgress=!0,100===t.progress&&(a.inProgress=!1)})})()}handleConvertEvent(t){var o=this;return(0,d.Z)(function*(){t.type===I.END?(o.zoneRef.run(()=>{o.isDownloadAllActive=!0}),o.fileStore.get(t.fileId).convertedFileData.set(t.targetFormat,t.fileData)):t.type===I.FAILED&&(h.j.info(`conversion failed for file with id: ${t.fileId}`),o.zoneRef.run(()=>{const a=o.fileStore.get(t.fileId);a.conversionErrors.set(t.targetFormat,"conversion failed! try converting in some other format"),a.inProgress=!1}))})()}handleFFMpegLog(t){h.j.info(`[FMPEG LOGS]: ${t.message}`),this.isMobile&&this.conversionLogs.push(t.message)}downloadLogs(){this.downloadFile("log-files.txt",new Blob([this.conversionLogs.join("\n\n")],{type:"text/plain"}))}addFileToConvert(t){var o=this;return(0,d.Z)(function*(){o.zoneRef.run(()=>{const a=o.formatFileName(t.name),s=a.split(".").pop(),p=function re(i,r,n){if(J.randomUUID&&!r&&!i)return J.randomUUID();const t=(i=i||{}).random||(i.rng||ie.Z)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,r){n=n||0;for(let o=0;o<16;++o)r[n+o]=t[o];return r}return(0,ne.S)(t)}(),v={id:p,file:t,inProgress:!1,type:X.S.VIDEO,name:`${o.ffmpegService.getPlainFileName(a)}_${p}.${s}`,convertProgress:0,targetFormat:1,convertedFileData:new Map,conversionErrors:new Map,supportedFormats:o.getSupportedTargetFormats(s),fileFormat:o.resolveFileFormatId(s)};o.fileStore.set(v.id,v),o.fileDisplayList.push(v)})})()}resolveFileFormatId(t){for(const[o,a]of x.entries())if(a.targetFormat===t)return o;return 6}getSupportedTargetFormats(t){return pe.get(t).map(a=>({formatId:a,targetFormat:x.get(a).targetFormat,displayName:x.get(a).displayName}))}convertAllVideos(){var t=this;return(0,d.Z)(function*(){for(let o of t.fileStore.values())!o.inProgress&&!o.convertedFileData.has(o.targetFormat)&&t.convertVideoFile(o)})()}convertVideoFile(t){var o=this;return(0,d.Z)(function*(){o.zoneRef.run(()=>{t.inProgress=!0,t.convertProgress=0}),o.ffmpegService.submitFileToConvert(t)})()}formatFileName(t){return t.replace(/ /g,"_")}downloadVideo(t){var o=this;return(0,d.Z)(function*(){const a=o.ffmpegService.getPlainFileName(t.name);yield o.downloadFile(`${a}_converted.${x.get(t.targetFormat).targetFormat}`,new Blob([t.convertedFileData.get(t.targetFormat)],{type:o.getMimeType(t.targetFormat)}))})()}getMimeType(t){const o=x.get(t).targetFormat;return"mp4"===o||"webm"===o?`video/${o}`:`audio/${o}`}downloadFile(t,o){var a=this;return(0,d.Z)(function*(){const s=a.renderer.createElement("a");a.renderer.setProperty(s,"href",URL.createObjectURL(o)),a.renderer.setProperty(s,"download",t),s.click()})()}changeTargetFormat(t,o){this.fileStore.get(t).targetFormat!==o&&(h.j.info(`changing target format of file with id: ${t} to ${x.get(o)}`),this.fileStore.get(t).targetFormat=o)}formatBytes(t,o=2){if(0===t)return"0 Bytes";const s=o<0?0:o,v=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,v)).toFixed(s))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][v]}openSettings(t){this.closeDialog();const a=this.formatFileName(t.file.name).split(".").pop(),s=this.getSupportedTargetFormats(a),p={referenceId:t.id,type:G.VIDEO_CONVERT_SETTINGS,rows:[{elements:[{type:B.DROPDOWN,propertyName:"targetFormat",data:{options:s.map(v=>({displayName:v.displayName,value:v.formatId})),targetFormat:t.targetFormat}}]}]};this.activeDialog=this.dialog.open(fe,{data:p}),this.activeDialog.afterClosed().subscribe(this.handleSettingsChange.bind(this))}handleSettingsChange(t={}){var o=this;return(0,d.Z)(function*(){if(h.j.info(`settings dialog closed with data: ${JSON.stringify(t)}`),Object.keys(t).length>0){const a=t,s=o.fileStore.get(a.referenceId);o.zoneRef.run(()=>{s.targetFormat=a.data.targetFormat})}})()}closeDialog(t={}){var o=this;return(0,d.Z)(function*(){o.activeDialog&&o.activeDialog.close(t)})()}selectFiles(t){var o=this;return(0,d.Z)(function*(){for(const a of t.target.files)yield o.addFileToConvert(a)})()}openFileDialog(){this.renderer.selectRootElement(this.inputFiles.nativeElement,!0).click()}dragOverHandler(t){return(0,d.Z)(function*(){t.preventDefault()})()}dropHandler(t){var o=this;return(0,d.Z)(function*(){t.preventDefault(),t.dataTransfer.items?[...t.dataTransfer.items].filter(a=>"file"===a.kind).map(a=>a.getAsFile()).forEach(function(){var a=(0,d.Z)(function*(s){return yield o.addFileToConvert(s)});return function(s){return a.apply(this,arguments)}}()):[...t.dataTransfer.files].forEach(function(){var a=(0,d.Z)(function*(s){return yield o.addFileToConvert(s)});return function(s){return a.apply(this,arguments)}}())})()}}return(i=r).\u0275fac=function(t){return new(t||i)(e.Y36(b.uw),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(M.Yg),e.Y36(Fe),e.Y36(Ee.H))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-video-converter"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ce,5),2&t){let a;e.iGM(a=e.CRH())&&(o.inputFiles=a.first)}},decls:7,vars:5,consts:[[1,"flex-display","flex-column-flow","flex-align-center","flex-gap-medium"],["type","file","multiple","",2,"display","none",3,"accept","change"],["inputFiles",""],["class","flex-display flex-column-flow flex-center flex-align-center file-drop-area file-area-width flex-gap-medium full-width",3,"drop","dragover",4,"ngIf"],[4,"ngIf"],["class","flex-display flex-row-flow flex-center full-width flex-gap-medium",3,"ngStyle",4,"ngIf"],["class","flex-display flex-column-flow y-scroll file-drop-area file-area-width file-list-div flex-gap-medium full-width",4,"ngIf"],[1,"flex-display","flex-column-flow","flex-center","flex-align-center","file-drop-area","file-area-width","flex-gap-medium","full-width",3,"drop","dragover"],[2,"transform","scale(2)"],[1,"header-font",2,"font-size","large"],["mat-stroked-button","","color","primary","matTooltip","select video to convert",3,"click"],[1,"bold",2,"color","red","font-style","italic"],[1,"flex-display","flex-row-flow","flex-center","full-width","flex-gap-medium",3,"ngStyle"],["mat-stroked-button","","color","accent","matTooltip","select videos to convert",3,"click"],["mat-stroked-button","","color","accent","matTooltip","convert all videos",3,"click"],[1,"flex-display","flex-column-flow","y-scroll","file-drop-area","file-area-width","file-list-div","flex-gap-medium","full-width"],["style","\n        border: 1px solid lightgrey;\n        margin-left: 10px;\n        margin-right: 10px;\n      ",4,"ngFor","ngForOf"],[2,"border","1px solid lightgrey","margin-left","10px","margin-right","10px"],[1,"flex-display","flex-row-flow","flex-align-center","flex-gap-large",2,"margin","10px"],["svgIcon","video-convert-icon","class","app-icon pointer-cursor","style","margin-left: 10px",4,"ngIf"],[1,"flex-display","flex-column-flow","header-font","file-name-div"],[1,"bold-text"],[1,"bold-text","header-font",2,"color","#3f51b5"],["class","bold-text","style","color: red",4,"ngIf"],["class","bold-text",4,"ngIf"],[1,"flex-full-height"],[1,"flex-display","flex-row-flow","flex-align-center","flex-center","flex-gap-medium"],["diameter","32",4,"ngIf"],["diameter","32","mode","determinate",3,"value",4,"ngIf"],["appearance","outline","color","primary","style","margin-bottom: -1.25em",4,"ngIf"],["svgIcon","settings-icon","class","pointer-cursor","matTooltip","change conversion settings",3,"click",4,"ngIf"],["svgIcon","play-icon","class","pointer-cursor","matTooltip","convert video file",3,"click",4,"ngIf"],["svgIcon","download-icon","class","pointer-cursor","matTooltip","download converted video",3,"click",4,"ngIf"],["class","pointer-cursor","color","warn","matTooltip","only limited video formats can be converted",4,"ngIf"],["svgIcon","video-convert-icon",1,"app-icon","pointer-cursor",2,"margin-left","10px"],[1,"bold-text",2,"color","red"],["diameter","32"],["diameter","32","mode","determinate",3,"value"],["appearance","outline","color","primary",2,"margin-bottom","-1.25em"],["disableRipple","",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["svgIcon","settings-icon","matTooltip","change conversion settings",1,"pointer-cursor",3,"click"],["svgIcon","play-icon","matTooltip","convert video file",1,"pointer-cursor",3,"click"],["svgIcon","download-icon","matTooltip","download converted video",1,"pointer-cursor",3,"click"],["color","warn","matTooltip","only limited video formats can be converted",1,"pointer-cursor"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"input",1,2),e.NdJ("change",function(s){return o.selectFiles(s)}),e.qZA(),e.YNc(3,Te,11,0,"div",3),e.YNc(4,Ie,3,0,"div",4),e.YNc(5,Me,9,3,"div",5),e.YNc(6,Ge,2,1,"div",6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("accept",o.validVideoFormats),e.xp6(2),e.Q6J("ngIf",0===o.fileDisplayList.length&&o.isSupported),e.xp6(1),e.Q6J("ngIf",!o.isSupported),e.xp6(1),e.Q6J("ngIf",o.fileDisplayList.length>0),e.xp6(1),e.Q6J("ngIf",o.fileDisplayList.length>0))},dependencies:[y.sg,y.O5,y.PC,L.Hw,N.lW,j.a8,R.KE,R.hX,A.gD,Q.ey,W.gM,q.Ou],styles:[".file-drop-area[_ngcontent-%COMP%]{border:1px solid lightgrey;border-radius:10px}.file-area-width[_ngcontent-%COMP%]{padding-top:30px;padding-bottom:30px}.file-list-div[_ngcontent-%COMP%]{max-height:400px}@media screen and (max-width: 735px){.file-list-div[_ngcontent-%COMP%]{max-height:300px}.file-name-div[_ngcontent-%COMP%]{width:60%;overflow-x:hidden}}"]}),r})()}];let Qe=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[k.Bz.forChild(Be),k.Bz]}),r})();var z=c(2202);let Ye=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[y.ez,A.LD,N.ot,L.Ps,z.KP,b.Is]}),r})(),je=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[y.ez,Qe,L.Ps,N.ot,j.QW,A.LD,W.AV,M.xu,z.KP,b.Is,q.Cq,Ye]}),r})()}}]);