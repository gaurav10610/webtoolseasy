{"version":3,"file":"default-src_app_service_ffmpeg_lib_util_index_ts-src_environments_tools-directory-config_ts.fe3e0f7d651c8e0f.js","mappings":"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","sources":["./src/app/service/ffmpeg/lib/util/const.ts","./src/app/service/ffmpeg/lib/util/errors.ts","./src/app/service/ffmpeg/lib/util/index.ts","./src/environments/tools-directory-config.ts"],"sourcesContent":["export const HeaderContentLength = 'Content-Length';\n","export const ERROR_RESPONSE_BODY_READER = new Error(\n  'failed to get response body reader'\n);\nexport const ERROR_INCOMPLETED_DOWNLOAD = new Error(\n  'failed to complete download'\n);\n","import {\n  ERROR_RESPONSE_BODY_READER,\n  ERROR_INCOMPLETED_DOWNLOAD,\n} from './errors';\nimport { HeaderContentLength } from './const';\nimport { ProgressCallback } from './types';\n\nconst readFromBlobOrFile = (blob: Blob | File): Promise<Uint8Array> =>\n  new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.onload = () => {\n      const { result } = fileReader;\n      if (result instanceof ArrayBuffer) {\n        resolve(new Uint8Array(result));\n      } else {\n        resolve(new Uint8Array());\n      }\n    };\n    fileReader.onerror = event => {\n      reject(\n        Error(\n          `File could not be read! Code=${event?.target?.error?.code || -1}`\n        )\n      );\n    };\n    fileReader.readAsArrayBuffer(blob);\n  });\n\n/**\n * An util function to fetch data from url string, base64, URL, File or Blob format.\n *\n * Examples:\n * ```ts\n * // URL\n * await fetchFile(\"http://localhost:3000/video.mp4\");\n * // base64\n * await fetchFile(\"data:<type>;base64,wL2dvYWwgbW9yZ...\");\n * // URL\n * await fetchFile(new URL(\"video.mp4\", import.meta.url));\n * // File\n * fileInput.addEventListener('change', (e) => {\n *   await fetchFile(e.target.files[0]);\n * });\n * // Blob\n * const blob = new Blob(...);\n * await fetchFile(blob);\n * ```\n */\nexport const fetchFile = async (\n  file?: string | File | Blob\n): Promise<Uint8Array> => {\n  let data: ArrayBuffer | number[];\n\n  if (typeof file === 'string') {\n    /* From base64 format */\n    if (/data:_data\\/([a-zA-Z]*);base64,([^\"]*)/.test(file)) {\n      data = atob(file.split(',')[1])\n        .split('')\n        .map(c => c.charCodeAt(0));\n      /* From remote server/URL */\n    } else {\n      data = await (await fetch(file)).arrayBuffer();\n    }\n  } else if (file instanceof URL) {\n    data = await (await fetch(file)).arrayBuffer();\n  } else if (file instanceof File || file instanceof Blob) {\n    data = await readFromBlobOrFile(file);\n  } else {\n    return new Uint8Array();\n  }\n\n  return new Uint8Array(data);\n};\n\n/**\n * importScript dynamically import a script, useful when you\n * want to use different versions of ffmpeg.wasm based on environment.\n *\n * Example:\n *\n * ```ts\n * await importScript(\"http://localhost:3000/ffmpeg\");\n * ```\n */\nexport const importScript = async (url: string): Promise<void> =>\n  new Promise(resolve => {\n    const script = document.createElement('script');\n    const eventHandler = () => {\n      script.removeEventListener('load', eventHandler);\n      resolve();\n    };\n    script.src = url;\n    script.type = 'text/javascript';\n    script.addEventListener('load', eventHandler);\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n\n/**\n * Download content of a URL with progress.\n *\n * Progress only works when Content-Length is provided by the server.\n *\n */\nexport const downloadWithProgress = async (\n  url: string | URL,\n  cb?: ProgressCallback\n): Promise<ArrayBuffer> => {\n  const resp = await fetch(url);\n  let buf;\n\n  try {\n    // Set total to -1 to indicate that there is not Content-Type Header.\n    const total = parseInt(resp.headers.get(HeaderContentLength) || '-1');\n\n    const reader = resp.body?.getReader();\n    if (!reader) throw ERROR_RESPONSE_BODY_READER;\n\n    const chunks = [];\n    let received = 0;\n    for (;;) {\n      const { done, value } = await reader.read();\n      const delta = value ? value.length : 0;\n\n      if (done) {\n        if (total != -1 && total !== received) throw ERROR_INCOMPLETED_DOWNLOAD;\n        cb && cb({ url, total, received, delta, done });\n        break;\n      }\n\n      chunks.push(value);\n      received += delta;\n      cb && cb({ url, total, received, delta, done });\n    }\n\n    const data = new Uint8Array(received);\n    let position = 0;\n    for (const chunk of chunks) {\n      data.set(chunk, position);\n      position += chunk.length;\n    }\n\n    buf = data.buffer;\n  } catch (e) {\n    console.log(`failed to send download progress event: `, e);\n    // Fetch arrayBuffer directly when it is not possible to get progress.\n    buf = await resp.arrayBuffer();\n    cb &&\n      cb({\n        url,\n        total: buf.byteLength,\n        received: buf.byteLength,\n        delta: 0,\n        done: true,\n      });\n  }\n\n  return buf;\n};\n\n/**\n * toBlobURL fetches data from an URL and return a blob URL.\n *\n * Example:\n *\n * ```ts\n * await toBlobURL(\"http://localhost:3000/ffmpeg\", \"text/javascript\");\n * ```\n */\nexport const toBlobURL = async (\n  url: string,\n  mimeType: string,\n  progress = false,\n  cb?: ProgressCallback\n): Promise<string> => {\n  const buf = progress\n    ? await downloadWithProgress(url, cb)\n    : await (await fetch(url)).arrayBuffer();\n  const blob = new Blob([buf], { type: mimeType });\n  return URL.createObjectURL(blob);\n};\n","import { AppNavigationConfig } from 'src/app/@types/config';\nimport * as appConfigJson from './apps.json';\n\nexport enum ApplicationIds {\n  VIDEO_CONVERTER = 'videoconverter',\n  SCREEN_RECORDER = 'screenrecorder',\n  TEXT_COMPARE = 'textcompare',\n  JWT_DECODER = 'jwtdecoder',\n  IMAGE_COMPRESSOR = 'imagecompressor',\n  JS_FORMATTER = 'jsformatter',\n  JSON_FORMATTER = 'jsonformatter',\n  HTML_FORMATTER = 'htmlformatter',\n  CSS_FORMATTER = 'cssformatter',\n  JSON_VIEWER = 'jsonviewer',\n  PASSWORD_GENERATOR = 'passwordgenerator',\n  BASE64_ENCODE = 'base64encoder',\n  BASE64_DECODE = 'base64decoder',\n  CRON_GENERATOR = 'crongenerator',\n  IMAGE_CROPPER = 'imagecropper',\n  UUID_VERSION1_GENERATOR = 'uuidv1generator',\n  UUID_VERSION4_GENERATOR = 'uuidv4generator',\n  GUID_GENERATOR = 'guidgenerator',\n  MARKDOWN_EDITOR = 'markdowneditor',\n  WORD_COUNTER = 'wordcounter',\n  QR_CODE_GENERATOR = 'qrcodegenerator',\n}\n\nconst appsConfigMap: Map<string, AppNavigationConfig> = new Map(\n  Object.entries(appConfigJson)\n);\nappsConfigMap.delete('default');\nexport const applicationConfig: Map<string, AppNavigationConfig> =\n  appsConfigMap;\n"],"names":["HeaderContentLength","ERROR_RESPONSE_BODY_READER","Error","ERROR_INCOMPLETED_DOWNLOAD","readFromBlobOrFile","blob","Promise","resolve","reject","fileReader","FileReader","onload","result","ArrayBuffer","Uint8Array","onerror","event","target","error","code","readAsArrayBuffer","fetchFile","_ref","_asyncToGenerator","file","data","test","atob","split","map","c","charCodeAt","fetch","arrayBuffer","URL","File","Blob","_x","apply","arguments","importScript","_ref2","url","script","document","createElement","eventHandler","removeEventListener","src","type","addEventListener","getElementsByTagName","appendChild","_x2","downloadWithProgress","_ref3","cb","resp","buf","total","parseInt","headers","get","reader","body","getReader","chunks","received","done","value","read","delta","length","push","position","chunk","set","buffer","e","console","log","byteLength","_x3","_x4","toBlobURL","_ref4","mimeType","progress","createObjectURL","_x5","_x6","appConfigJson","ApplicationIds","appsConfigMap","Map","Object","entries","delete","applicationConfig"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}