(self.webpackChunkwebtoolseasy=self.webpackChunkwebtoolseasy||[]).push([[131],{2313:(A,C,d)=>{"use strict";d.r(C),d.d(C,{ScreenRecorderModule:()=>Me});var p=d(6814),y=d(3403),r=d(5861),e=d(5879),i=d(7294),l=d(3242),h=d(553),w=d(6636);const S="/tools/screen-recorder",_="Free Online Screen Recorder | Online Video Recorder",T="Easily Capture your Screen via Best Free Online Screen Recorder with or without audio, video from microphone and webcam | No download, No Watermark with Lag free recording for PCs ( Windows/ MAC/ Ubuntu )",M=`${h.N.screenshotsBaseUrl}/screen-recorder.png`,b={mainHeading:"Online Screen Recorder",subHeading:"Record Screen With Audio, Video for Free",navigationUrl:S,pageTitle:_,metaTags:[{name:"description",content:T},{name:"author",content:"Gaurav Kumar Yadav"},{name:"robots",content:"index, follow"},{property:"og:title",content:_},{property:"og:type",content:"website"},{property:"og:url",content:`${h.N.hostname}${S}`},{property:"og:image",content:M},{property:"og:image:secure_url",content:M},{property:"og:description",content:T},{property:"og:site_name",content:"WebToolsEasy"}],tags:["screen recorder","screen capture","screen record on mac","screen recorder windows 10","windows screen recorder"],icons:[{iconName:"app-icon",iconRelativeUrl:"app-icon.svg"},{iconName:"screen-icon",iconRelativeUrl:"screen.svg"},{iconName:"video-convert-icon",iconRelativeUrl:"video-convert.svg"},{iconName:"share-fb",iconRelativeUrl:"share-fb.svg"},{iconName:"share-linkedin",iconRelativeUrl:"share-linkedin.svg"},{iconName:"share-twitter",iconRelativeUrl:"share-twitter.svg"},{iconName:"share-copy",iconRelativeUrl:"share-copy.svg"},{iconName:"home-icon",iconRelativeUrl:"home.svg"}],relatedTools:[{applicationId:"videoconverter",displayText:w.x.VIDEO_CONVERTER,iconName:"video-convert-icon",navigateUrl:"/tools/video-converter"}]},F=[{heading:"How to use Screen Recorder?",listData:["To include mic audio & camera video in the recorded video, use provided checkboxes.","Start screen recording using start recording button.","When asked for mic & camera permission then provide the same.","Camera video if included will appear at bottom right corner in the recorded video in 150X150 px box.","Screen recording can be stopped via native stop recording button or use stop recording button on the screen (button will appear once recording starts).","Once recording is stopped then recorded video will be downloaded automatically."]},{heading:"Key features",listData:["Screen recording is 100% free.","Unlimited screen recording in HD format.","Record screen with camera video & mic audio.","No watermark in the recorded video.","Easy to use: No software installation is needed to record screen.","Cross platform: tool is completely web-based and can be accessed wherever you are, from any computer. It is compatible with all major browsers and OSes, including Windows, macOS, and Linux.","Secure: Screen recording is 100% secure as whole processing is being done at client side only (in host browser) and we don't store any video."]},{heading:"Disclaimer",blockData:["Recorded video will be in WEBM format. To convert in some other format like MP4 you can use our video converter tool to convert the recorded video."]}];function v(n){return new Promise((s,a)=>{n.oncomplete=n.onsuccess=()=>s(n.result),n.onabort=n.onerror=()=>a(n.error)})}let O;function x(){return O||(O=function G(n,s){const a=indexedDB.open(n);a.onupgradeneeded=()=>a.result.createObjectStore(s);const t=v(a);return(o,c)=>t.then(u=>c(u.transaction(s,o).objectStore(s)))}("keyval-store","keyval")),O}function L(n,s=x()){return s("readonly",a=>v(a.get(n)))}function D(n=x()){return n("readwrite",s=>(s.clear(),v(s.transaction)))}var J=d(1273),Z=d(1088),B=d(8645),K=d(9773),Q=d(6179),k=d(6593),I=d(617),W=d(5282),$=d(3927),X=d(9609),N=d(2296),U=d(5986),P=d(5940),q=d(797),ee=d(2577),te=d(2740),ne=d(323),ie=d(6463),oe=d(659);function re(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"span",2),e.BQk()),2&n){const a=e.oxw();e.xp6(1),e.Q6J("innerHTML",a.i.text,e.oJD)}}function se(n,s){1&n&&e.GkF(0)}const ae=function(n){return{$implicit:n}};var g=function(n){return n[n.ing=0]="ing",n[n.pause=1]="pause",n[n.stop=2]="stop",n[n.done=3]="done",n}(g||{});let V=(()=>{var n;class s{constructor(t){this.ngZone=t,this.fns=[],this.commands=[],this.nextTime=0,this.ing=!1}start(){!0!==this.ing&&(this.ing=!0,this.nextTime=+new Date,this.ngZone.runOutsideAngular(()=>{this.process()}))}process(){for(;this.commands.length;)this.commands.shift()();let t=+new Date-this.nextTime;const o=1+Math.floor(t/100);t=100-t%100,this.nextTime+=100*o;for(let c=0,u=this.fns.length;c<u;c+=2){let m=this.fns[c+1];if(0===m)this.fns[c](o);else{m+=2*o-1;const f=Math.floor(m/20);f>0&&this.fns[c](f),this.fns[c+1]=m%20+1}}this.ing&&setTimeout(()=>this.process(),t)}add(t,o){return this.commands.push(()=>{this.fns.push(t),this.fns.push(1e3===o?1:0),this.ing=!0}),this}remove(t){return this.commands.push(()=>{const o=this.fns.indexOf(t);-1!==o&&this.fns.splice(o,2),this.ing=this.fns.length>0}),this}}return(n=s).\u0275fac=function(t){return new(t||n)(e.LFG(e.R0b))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),s})(),H=(()=>{var n;class s{constructor(t){this.locale=t,this.demand=!1,this.leftTime=0,this.format="HH:mm:ss",this.timezone="+0000",this.formatDate=({date:o,formatStr:c,timezone:u})=>(0,p.p6)(new Date(o),c,this.locale,u||this.timezone||"+0000")}}return(n=s).\u0275fac=function(t){return new(t||n)(e.LFG(e.soG))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),s})(),j=(()=>{var n;class s{set config(t){null!=t.notify&&!Array.isArray(t.notify)&&t.notify>0&&(t.notify=[t.notify]),this._config=t}get config(){return this._config}constructor(t,o,c,u,m){this.locale=t,this.timer=o,this.defCog=c,this.cdr=u,this.ngZone=m,this.frequency=1e3,this._notify={},this.status=g.ing,this.isDestroy=!1,this.i={},this.left=0,this.event=new e.vpe}begin(){this.status=g.ing,this.callEvent("start")}restart(){this.status!==g.stop&&this.destroy(),this.init(),this.callEvent("restart")}stop(){this.status!==g.stop&&(this.status=g.stop,this.destroy(),this.callEvent("stop"))}pause(){this.status===g.stop||this.status===g.pause||(this.status=g.pause,this.callEvent("pause"))}resume(){this.status===g.stop||this.status!==g.pause||(this.status=g.ing,this.callEvent("resume"))}callEvent(t){this.event.emit({action:t,left:this.left,status:this.status,text:this.i.text})}init(){const{locale:t,defCog:o}=this,c=this.config={...new H(t),...o,...this.config},u=this.frequency=~c.format.indexOf("S")?100:1e3;this.status=c.demand?g.pause:g.ing,this.getLeft();const m=this.reflow;this.reflow=(f=0,R=!1)=>m.apply(this,[f,R]),Array.isArray(c.notify)&&c.notify.forEach(f=>{if(f<1)throw new Error("The notify config must be a positive integer.");f*=1e3,this._notify[f-=f%u]=!0}),this.timer.add(this.reflow,u).start(),this.reflow(0,!0)}destroy(){return this.timer.remove(this.reflow),this}reflow(t=0,o=!1){if(this.isDestroy)return;const{status:c,config:u,_notify:m}=this;if(!o&&c!==g.ing)return;let f=this.left=this.left-this.frequency*t;f<1&&(f=0),this.i={value:f,text:u.formatDate({date:f,formatStr:u.format,timezone:u.timezone})},"function"==typeof u.prettyText&&(this.i.text=u.prettyText(this.i.text)),this.cdr.detectChanges(),(0===u.notify||m[f])&&this.ngZone.run(()=>{this.callEvent("notify")}),0===f&&this.ngZone.run(()=>{this.status=g.done,this.destroy(),this.callEvent("done")})}getLeft(){const{config:t,frequency:o}=this;let c=1e3*t.leftTime;const u=t.stopTime;!c&&u&&(c=u-(new Date).getTime()),this.left=c-c%o}ngOnInit(){this.init(),this.config.demand||this.begin()}ngOnDestroy(){this.isDestroy=!0,this.destroy()}ngOnChanges(t){t.config.firstChange||this.restart()}}return(n=s).\u0275fac=function(t){return new(t||n)(e.Y36(e.soG),e.Y36(V),e.Y36(H),e.Y36(e.sBO),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["countdown"]],hostVars:2,hostBindings:function(t,o){2&t&&e.ekj("count-down",!0)},inputs:{config:"config",render:"render"},outputs:{event:"event"},standalone:!0,features:[e._Bn([V]),e.TTD,e.jDz],decls:2,vars:5,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(t,o){1&t&&(e.YNc(0,re,2,1,"ng-container",0),e.YNc(1,se,1,0,"ng-container",1)),2&t&&(e.Q6J("ngIf",!o.render),e.xp6(1),e.Q6J("ngTemplateOutlet",o.render)("ngTemplateOutletContext",e.VKq(3,ae,o.i)))},dependencies:[p.ez,p.O5,p.tP],encapsulation:2,changeDetection:0}),s})(),ce=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[j]}),s})();const de=["cd"];function le(n,s){1&n&&(e.TgZ(0,"span",17),e._uU(1,"screen capturing is not supported by host browser"),e.qZA())}function ue(n,s){if(1&n){const a=e.EpF();e.TgZ(0,"section",18)(1,"mat-checkbox",19),e.NdJ("change",function(o){e.CHM(a);const c=e.oxw();return e.KtG(c.recorderOptionChange(o,"mic-audio"))}),e._uU(2,"include mic audio"),e.qZA(),e.TgZ(3,"mat-checkbox",19),e.NdJ("change",function(o){e.CHM(a);const c=e.oxw();return e.KtG(c.recorderOptionChange(o,"camera-video"))}),e._uU(4,"include camera video"),e.qZA()()}}function he(n,s){if(1&n){const a=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.startRecording())}),e.TgZ(1,"mat-icon"),e._uU(2,"play_arrow"),e.qZA(),e._uU(3," Start Recording "),e.qZA()}}function me(n,s){if(1&n){const a=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.pauseRecording())}),e.TgZ(1,"mat-icon"),e._uU(2,"pause"),e.qZA(),e._uU(3," Pause Recording "),e.qZA()}}function fe(n,s){if(1&n){const a=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.resumeRecording())}),e.TgZ(1,"mat-icon"),e._uU(2,"play_arrow"),e.qZA(),e._uU(3," Resume Recording "),e.qZA()}}function ge(n,s){if(1&n){const a=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.stopRecording())}),e.TgZ(1,"mat-icon"),e._uU(2,"stop"),e.qZA(),e._uU(3," Stop Recording "),e.qZA()}}function pe(n,s){1&n&&(e.TgZ(0,"div",24),e._UZ(1,"mat-spinner",25),e.TgZ(2,"span",26),e._uU(3,"preparing video file to download"),e.qZA()())}const ve=[{path:"",component:(()=>{var n;class s extends i.H{constructor(t,o,c,u,m,f,R,Ae,Y,Oe){super(),this.titleService=t,this.metaService=o,this.document=c,this.matIconRegistry=u,this.domSanitizer=m,this.platformId=f,this.renderer=R,this.zoneRef=Ae,this.breakpointObserver=Y,this.appContextService=Oe,this.appId="imagecompress",this.isRecording=!1,this.isProcessingStream=!1,this.isRecPaused=!1,this.timeCounter=0,this.videoChunksIds=[],this.videoFileExtention="webm",this.recorderOptionConfig={webm:{mimeType:"video/webm; codecs=vp9"},mp4:{mimeType:"video/mp4"}},this.cameraVideoOptions={width:150,height:150},this.includeScreenAudio=!1,this.includeMicAudio=!1,this.includeCameraVideo=!1,this.videoChunksCounter=0,this.isSupported=!0,this.destroyed=new B.x,this.config={demand:!1},this.loadCustomIcons(b.icons,this.matIconRegistry,this.domSanitizer,this.platformId,this.appContextService),this.updatePageMetaData(b,this.titleService,this.metaService,this.document),this.appContextService.tags=b.tags,this.appContextService.mainHeading=b.mainHeading,this.appContextService.subHeading=b.subHeading,this.appContextService.relatedTools=b.relatedTools,this.appContextService.descrptionData=F,this.breakpointObserver.observe([Z.u3.Handset,Z.u3.Web]).pipe((0,K.R)(this.destroyed)).subscribe(He=>{this.isMobile=Y.isMatched(`(max-width: ${Q.U})`),this.checkCompatibility()}),this.checkCompatibility()}checkCompatibility(){h.N.production&&(this.isSupported=!this.isMobile)}ngOnDestroy(){(0,p.NF)(this.platformId)&&D(),this.destroyed.next(),this.destroyed.complete()}resetContextVariables(){this.screenStream=void 0,this.webcamStream=void 0,this.mergedMediaStream=void 0,this.mediaStreamRecorder=void 0,this.videoChunksCounter=0,this.videoChunksIds=[]}startRecording(){var t=this;this.zoneRef.run((0,r.Z)(function*(){t.isRecording=!0,t.countdown.restart(),t.resetContextVariables(),yield D();try{t.screenStream=yield t.getScreenStream(),l.j.info(`screen stream dimensions: ${t.getVideoStreamHeightWidth(t.screenStream)}`),t.configureStreamStopListener(t.screenStream)}catch(o){l.j.error("error occured while capturing screen stream"),l.j.error(o),t.stopRecording()}try{(t.includeMicAudio||t.includeCameraVideo)&&(t.webcamStream=yield t.getCameraAndMicStream(),t.configureStreamStopListener(t.webcamStream))}catch(o){l.j.error("error occured while capturing camera or mic media stream"),l.j.error(o),t.stopRecording()}t.webcamStream?(t.mergedMediaStream=t.mergeMediaStreams(t.screenStream,t.webcamStream),t.mergedMediaStream||(l.j.error("error encountered while merging media streams"),t.stopRecording())):t.mergedMediaStream=t.screenStream,t.mergedMediaStream&&t.configureStreamRecorder(t.mergedMediaStream)}))}configureStreamStopListener(t){t.getTracks().forEach(o=>{o.addEventListener("ended",c=>{l.j.info("media stream track has ended"),this.isRecording&&this.stopRecording()})})}mergeMediaStreams(t,o){const c=this.screenStream?.getVideoTracks()[0].getSettings();let m=new J.VideoStreamMerger({width:c.width,height:c.height});return m.addStream(t,{x:0,y:0,width:m.width,height:m.height,mute:!0,index:0}),m.addStream(o,{x:m.width-this.cameraVideoOptions.width,y:m.height-this.cameraVideoOptions.height,width:this.cameraVideoOptions.width,height:this.cameraVideoOptions.height,mute:!1,index:1}),m.start(),m.result}configureStreamRecorder(t){l.j.info("configuring media stream recorder"),this.mediaStreamRecorder=new MediaRecorder(t,this.recorderOptionConfig[this.videoFileExtention]),this.mediaStreamRecorder.ondataavailable=o=>{const c=Date.now();(function z(n,s,a=x()){a("readwrite",t=>(t.put(s,n),v(t.transaction)))})(c,o.data),this.videoChunksIds.push(c)},this.mediaStreamRecorder.start(s.RECORDER_TIME_SLICE_MS),this.countdown.begin()}getScreenStream(){var t=this;return(0,r.Z)(function*(){const o={video:!0,audio:!1};return t.includeScreenAudio&&(o.audio=!0),navigator.mediaDevices.getDisplayMedia(o)})()}getCameraAndMicStream(){var t=this;return(0,r.Z)(function*(){return navigator.mediaDevices.getUserMedia({video:t.includeCameraVideo,audio:t.includeMicAudio})})()}pauseRecording(){this.mediaStreamRecorder?.pause(),this.isRecPaused=!0,this.countdown.pause()}resumeRecording(){this.mediaStreamRecorder?.resume(),this.isRecPaused=!1,this.countdown.resume()}stopRecording(){this.mediaStreamRecorder?.stop(),this.screenStream?.getTracks().forEach(t=>t.stop()),this.webcamStream?.getTracks().forEach(t=>t.stop()),this.mergedMediaStream?.getTracks().forEach(t=>t.stop()),this.screenStream&&this.mergedMediaStream&&this.processMediaStream(),this.isRecording=!1,this.countdown.stop()}processMediaStream(){var t=this;this.isProcessingStream=!0,setTimeout((0,r.Z)(function*(){try{const o=[];t.videoChunksIds.sort(function(u,m){return u-m});const c=t.videoChunksIds.length;for(let u=0;u<c;u++)o.push(yield L(t.videoChunksIds[u]));yield t.downloadVideoFile("recorded-video-file.webm",new Blob(o,{type:"video/webm"})),t.zoneRef.run(()=>t.isProcessingStream=!1),D()}catch(o){l.j.info("error occured while preparing video file for download"),l.j.error(o),t.zoneRef.run(()=>t.isProcessingStream=!1)}}),s.RECORDING_START_DELAY_MS)}recorderOptionChange(t,o){switch(l.j.info(`recorder option changed: ${o}`),o){case"mic-audio":this.includeMicAudio=t.checked;break;case"camera-video":this.includeCameraVideo=t.checked}}downloadVideoFile(t,o){var c=this;return(0,r.Z)(function*(){const u=c.renderer.createElement("a");c.renderer.setProperty(u,"href",URL.createObjectURL(o)),c.renderer.setProperty(u,"download",t),u.click()})()}getVideoStreamHeightWidth(t){if(t.getVideoTracks().length>0){const o=t.getVideoTracks()[0].getSettings();return`[ height: ${o.height}, width: ${o.width} ]`}return""}}return(n=s).RECORDING_START_DELAY_MS=5e3,n.RECORDER_TIME_SLICE_MS=100,n.\u0275fac=function(t){return new(t||n)(e.Y36(k.Dx),e.Y36(k.h_),e.Y36(p.K0),e.Y36(I.jv),e.Y36(k.H7),e.Y36(e.Lbi),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(Z.Yg),e.Y36(W.i))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-screen-recorder"]],viewQuery:function(t,o){if(1&t&&e.Gf(de,5),2&t){let c;e.iGM(c=e.CRH())&&(o.countdown=c.first)}},features:[e.qOj],decls:24,vars:8,consts:[[1,"full-height","flex-display","flex-column-flow","no-y-scroll"],[1,"full-width","y-scroll"],[1,"flex-display","flex-column-flow","flex-align-center","base-app-container","flex-gap-large"],[1,"full-width"],[1,"flex-display","flex-column-flow","flex-align-center","full-width","flex-gap-large"],[1,"flex-display","flex-column-flow","flex-center","flex-align-center","full-width","icon-div"],["svgIcon","screen-icon"],["class","error",4,"ngIf"],["class","flex-display recoder-options",4,"ngIf"],[1,"flex-display","flex-row-flow","flex-gap-medium"],["mat-stroked-button","","aria-label","start recording button","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","","aria-label","pause recording button","color","warn",3,"click",4,"ngIf"],["mat-stroked-button","","aria-label","resume recording button","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","aria-label","stop recording button","color","warn",3,"click",4,"ngIf"],[2,"display","none",3,"config"],["cd",""],["class","flex-display flex-row-flow flex-align-center",4,"ngIf"],[1,"error"],[1,"flex-display","recoder-options"],[3,"change"],["mat-stroked-button","","aria-label","start recording button","color","primary",3,"click"],["mat-stroked-button","","aria-label","pause recording button","color","warn",3,"click"],["mat-stroked-button","","aria-label","resume recording button","color","accent",3,"click"],["mat-raised-button","","aria-label","stop recording button","color","warn",3,"click"],[1,"flex-display","flex-row-flow","flex-align-center"],["color","primary","diameter","30",2,"margin-right","10px"],[1,"bold-text"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-header-toolbar"),e.TgZ(2,"div",1)(3,"div",2),e._UZ(4,"app-tool-heading")(5,"app-share-buttons",3),e.TgZ(6,"div",4)(7,"div",5),e._UZ(8,"mat-icon",6),e.qZA(),e.YNc(9,le,2,0,"span",7),e.YNc(10,ue,5,0,"section",8),e.TgZ(11,"div",9),e.YNc(12,he,4,0,"button",10),e.YNc(13,me,4,0,"button",11),e.YNc(14,fe,4,0,"button",12),e.YNc(15,ge,4,0,"button",13),e.qZA(),e._UZ(16,"countdown",14,15),e.YNc(18,pe,4,0,"div",16),e.qZA(),e._UZ(19,"app-related-tools",3)(20,"app-description",3)(21,"app-tags")(22,"app-follow-buttons"),e.qZA(),e._UZ(23,"app-footer"),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("ngIf",!o.isSupported),e.xp6(1),e.Q6J("ngIf",o.isSupported),e.xp6(2),e.Q6J("ngIf",!o.isRecording&&!o.isProcessingStream&&o.isSupported),e.xp6(1),e.Q6J("ngIf",o.isRecording&&!o.isRecPaused),e.xp6(1),e.Q6J("ngIf",o.isRecording&&o.isRecPaused),e.xp6(1),e.Q6J("ngIf",o.isRecording&&!o.isProcessingStream&&o.isSupported),e.xp6(1),e.Q6J("config",o.config),e.xp6(2),e.Q6J("ngIf",o.isProcessingStream))},dependencies:[p.O5,$.u,X.O,I.Hw,N.lW,U.oG,P.Ou,q.z,ee.d,te.o,ne.c,ie.c,oe.w,j],styles:[".icon-div[_ngcontent-%COMP%]{height:300px}.icon-div[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:scale(10)}.error[_ngcontent-%COMP%]{color:red;font-size:large;font-style:italic;font-weight:700}@media screen and (max-width: 735px){.icon-div[_ngcontent-%COMP%]{height:150px}.icon-div[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:scale(5)}.recoder-options[_ngcontent-%COMP%]{flex-direction:column}.error[_ngcontent-%COMP%]{font-size:small}}"]}),s})()}];let ye=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[y.Bz.forChild(ve),y.Bz]}),s})();var Se=d(8369),we=d(6861),xe=d(3665),Ce=d(6122),_e=d(300),be=d(4485),Re=d(8292),Te=d(3341);let Me=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,ye,Re.K,Te.l,I.Ps,N.ot,U.p9,P.Cq,Se.b,we.E,xe.I,Ce._,_e.K,be.E,ce]}),s})()},3242:(A,C,d)=>{"use strict";d.d(C,{j:()=>y});var p=d(553);class y{static info(e){p.N.production||console.log(e)}static debug(e){p.N.production||console.log(e)}static error(e){console.log(e)}}},1273:function(A){A.exports=function(){"use strict";var C={d:function(y,r){for(var e in r)C.o(r,e)&&!C.o(y,e)&&Object.defineProperty(y,e,{enumerable:!0,get:r[e]})},o:function(y,r){return Object.prototype.hasOwnProperty.call(y,r)},r:function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})}},d={};C.r(d),C.d(d,{VideoStreamMerger:function(){return p}});class p{constructor(r){this.width=720,this.height=405,this.fps=25,this._streams=[],this._frameCount=0,this.clearRect=!0,this.started=!1,this.result=null,this.supported=null,this._canvas=null,this._ctx=null,this._videoSyncDelayNode=null,this._audioDestination=null,this._audioCtx=null;const e=window.AudioContext||window.webkitAudioContext,i=!(!window.AudioContext||!(new e).createMediaStreamDestination),l=!!document.createElement("canvas").captureStream;if(!(this.supported=i&&l))return;this.setOptions(r);const h=this._audioCtx=new e,w=this._audioDestination=h?.createMediaStreamDestination();this._videoSyncDelayNode=h.createDelay(5),this._videoSyncDelayNode.connect(w),this._setupConstantNode(),this.started=!1,this.result=null,this._backgroundAudioHack()}setOptions(r){this._audioCtx=(r=r||{}).audioContext||new AudioContext,this.width=r.width||this.width,this.height=r.height||this.width,this.fps=r.fps||this.fps,this.clearRect=void 0===r.clearRect||r.clearRect}setOutputSize(r,e){this.width=r,this.height=e,this._canvas&&(this._canvas.setAttribute("width",this.width.toString()),this._canvas.setAttribute("height",this.height.toString()))}getAudioContext(){return this._audioCtx}getAudioDestination(){return this._audioDestination}getCanvasContext(){return this._ctx}_backgroundAudioHack(){if(this._audioCtx){const r=this._createConstantSource(),e=this._audioCtx.createGain();e&&r&&(e.gain.value=.001,r.connect(e),e.connect(this._audioCtx.destination),r.start())}}_setupConstantNode(){if(this._audioCtx&&this._videoSyncDelayNode){const r=this._createConstantSource();if(r){r.start();const e=this._audioCtx.createGain();e.gain.value=0,r.connect(e),e.connect(this._videoSyncDelayNode)}}}_createConstantSource(){if(this._audioCtx){if(this._audioCtx.createConstantSource)return this._audioCtx.createConstantSource();const r=this._audioCtx.createBufferSource(),e=this._audioCtx.createBuffer(1,1,this._audioCtx.sampleRate);return e.getChannelData(0)[0]=10,r.buffer=e,r.loop=!0,r}}updateIndex(r,e){"string"==typeof r&&(r={id:r}),e=e??0;for(let i=0;i<this._streams.length;i++)r.id===this._streams[i].id&&(this._streams[i].index=e);this._sortStreams()}_sortStreams(){this._streams=this._streams.sort((r,e)=>r.index-e.index)}addMediaElement(r,e,i){if((i=i||{}).x=i.x||0,i.y=i.y||0,i.width=i.width||this.width,i.height=i.height||this.height,i.mute=i.mute||i.muted||!1,i.oldDraw=i.draw,i.oldAudioEffect=i.audioEffect,i.draw=e instanceof HTMLVideoElement||e instanceof HTMLImageElement?(l,h,w)=>{i.oldDraw?i.oldDraw(l,e,w):(l.drawImage(e,i.x,i.y,null==i.width?this.width:i.width,null==i.height?this.height:i.height),w())}:null,this._audioCtx&&!i.mute){const l=e._mediaElementSource||this._audioCtx.createMediaElementSource(e);e._mediaElementSource=l,l.connect(this._audioCtx.destination);const h=this._audioCtx.createGain();l.connect(h),(e instanceof HTMLVideoElement||e instanceof HTMLAudioElement)&&e.muted?(e.muted=!1,e.volume=.001,h.gain.value=1e3):h.gain.value=1,i.audioEffect=(w,S)=>{i.oldAudioEffect?i.oldAudioEffect(h,S):h.connect(S)},i.oldAudioEffect=null}this.addStream(r,i)}addStream(r,e){if("string"==typeof r)return this._addData(r,e);const i={isData:!1};i.x=(e=e||{}).x||0,i.y=e.y||0,i.width=e.width,i.height=e.height,i.draw=e.draw||null,i.mute=e.mute||e.muted||!1,i.audioEffect=e.audioEffect||null,i.index=null==e.index?0:e.index,i.hasVideo=r.getVideoTracks().length>0,i.hasAudio=r.getAudioTracks().length>0;let l=null;for(let h=0;h<this._streams.length;h++)this._streams[h].id===r.id&&(l=this._streams[h].element);l||(l=document.createElement("video"),l.autoplay=!0,l.muted=!0,l.playsInline=!0,l.srcObject=r,l.setAttribute("style","position:fixed; left: 0px; top:0px; pointer-events: none; opacity:0;"),document.body.appendChild(l),l.play().catch(null),i.hasAudio&&this._audioCtx&&!i.mute&&(i.audioSource=this._audioCtx.createMediaStreamSource(r),i.audioOutput=this._audioCtx.createGain(),i.audioOutput.gain.value=1,i.audioEffect?i.audioEffect(i.audioSource,i.audioOutput):i.audioSource.connect(i.audioOutput),i.audioOutput.connect(this._videoSyncDelayNode))),i.element=l,i.id=r.id||null,this._streams.push(i),this._sortStreams()}removeStream(r){"string"==typeof r&&(r={id:r});for(let e=0;e<this._streams.length;e++){const i=this._streams[e];r.id===i.id&&(i.audioSource&&(i.audioSource=null),i.audioOutput&&(i.audioOutput.disconnect(this._videoSyncDelayNode),i.audioOutput=null),i.element&&i.element.remove(),this._streams[e]=null,this._streams.splice(e,1),e--)}}_addData(r,e){const i={isData:!0};i.draw=(e=e||{}).draw||null,i.audioEffect=e.audioEffect||null,i.id=r,i.element=null,i.index=null==e.index?0:e.index,this._videoSyncDelayNode&&this._audioCtx&&i.audioEffect&&(i.audioOutput=this._audioCtx.createGain(),i.audioOutput.gain.value=1,i.audioEffect(null,i.audioOutput),i.audioOutput.connect(this._videoSyncDelayNode)),this._streams.push(i),this._sortStreams()}_requestAnimationFrame(r){let e=!1;const i=setInterval(()=>{!e&&document.hidden&&(e=!0,clearInterval(i),r())},1e3/this.fps);requestAnimationFrame(()=>{e||(e=!0,clearInterval(i),r())})}start(){var r,e,i,l,h;this._canvas=document.createElement("canvas"),this._canvas.setAttribute("width",this.width.toString()),this._canvas.setAttribute("height",this.height.toString()),this._canvas.setAttribute("style","position:fixed; left: 110%; pointer-events: none"),this._ctx=this._canvas.getContext("2d"),this.started=!0,this._requestAnimationFrame(this._draw.bind(this)),this.result=(null===(r=this._canvas)||void 0===r?void 0:r.captureStream(this.fps))||null;const w=null===(e=this.result)||void 0===e?void 0:e.getAudioTracks()[0];w&&(null===(i=this.result)||void 0===i||i.removeTrack(w));const S=null===(l=this._audioDestination)||void 0===l?void 0:l.stream.getAudioTracks();S&&S.length&&(null===(h=this.result)||void 0===h||h.addTrack(S[0]))}_updateAudioDelay(r){this._videoSyncDelayNode&&this._audioCtx&&this._videoSyncDelayNode.delayTime.setValueAtTime(r/1e3,this._audioCtx.currentTime)}_draw(){var r;if(!this.started)return;this._frameCount++;let e=0;this._frameCount%60==0&&(e=performance.now());let i=this._streams.length;const l=()=>{if(i--,i<=0){if(this._frameCount%60==0){const h=performance.now();this._updateAudioDelay(h-e)}this._requestAnimationFrame(this._draw.bind(this))}};this.clearRect&&(null===(r=this._ctx)||void 0===r||r.clearRect(0,0,this.width,this.height)),this._streams.forEach(h=>{h.draw?h.draw(this._ctx,h.element,l):(!h.isData&&h.hasVideo&&this._drawVideo(h.element,h),l())}),0===this._streams.length&&l()}_drawVideo(r,e){var i;const w=e.height||this.height,S=e.width||this.width;let _=e.x||0,T=e.y||0;try{null===(i=this._ctx)||void 0===i||i.drawImage(r,_,T,S,w)}catch(M){console.error(M)}}stop(){var r,e;this.started=!1,this._canvas=null,this._ctx=null,this._streams.forEach(i=>{i.element&&i.element.remove()}),this._streams=[],null===(r=this._audioCtx)||void 0===r||r.close(),this._audioCtx=null,this._audioDestination=null,this._videoSyncDelayNode=null,null===(e=this.result)||void 0===e||e.getTracks().forEach(i=>{i.stop()}),this.result=null}destroy(){this.stop()}}return typeof window<"u"&&(window.VideoStreamMerger=p),d}()}}]);